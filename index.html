<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToDoMon List App</title>
    <title>ToDoMon List App</title>
    <!-- Cache buster added for style.css - FORCE RELOAD -->
    <script>document.write('<link rel="stylesheet" href="css/style.css?nocache=' + new Date().getTime() + '">');</script>
    <script>document.write('<link rel="stylesheet" href="css/habitat-style.css?nocache=' + new Date().getTime() + '">');</script>
    <noscript>
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/habitat-style.css">
    </noscript>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Orbitron:wght@400;700;900&display=swap"
        rel="stylesheet">
</head>

<body class="dark-mode">
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="logo-section">
                <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/472.png"
                    alt="Gliscor" class="header-pokemon" id="headerPokemon">
                <h1>ToDoMon List</h1>
            </div>
            <div class="header-right">
                <button class="settings-btn" id="settingsBtn" title="Configuraci√≥n">
                    ‚öôÔ∏è
                </button>
                <div class="trainer-level">
                    <span class="level-label">Nivel</span>
                    <span class="level-number" id="trainerLevel">1</span>
                </div>
            </div>
        </header>

        <!-- Stats Section -->
        <section class="stats-section">
            <div class="stat-box">
                <span class="stat-label">Tareas</span>
                <span class="stat-value"><span id="completedCount">0</span> / <span id="totalCount">0</span></span>
            </div>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <span class="progress-text" id="progressText">0%</span>
            </div>
        </section>

        <!-- Pok√©dex Dashboard -->
        <section class="pokedex-dashboard collapsed" id="pokedexDashboard">
            <div class="pokedex-header" onclick="togglePokedex()">
                <div class="pokedex-title">
                    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/177.png" 
                         alt="Natu" class="pokedex-icon">
                    <h2>POK√âDEX</h2>
                    <span class="pokedex-count" id="pokedexCount">0</span>
                </div>
                <span class="pokedex-toggle">‚ñº</span>
            </div>
            <div class="pokedex-content" id="pokedexContent">
                <div class="pokedex-grid" id="pokedexGrid">
                    <!-- Pok√©dex entries will be rendered here -->
                </div>
                <div class="pokedex-empty" id="pokedexEmpty">
                    <p>¬°Tu Pok√©dex est√° vac√≠a!</p>
                    <span>Completa tareas para registrar Pok√©mon</span>
                </div>
            </div>
        </section>


        <!-- Task Lists -->
        <section class="tasks-section">
            <!-- üî• Urgente -->
            <div class="task-category collapsible" id="urgentTasks">
                <div class="category-header" data-category="urgent">
                    <span class="collapse-icon">‚ñº</span>
                    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/257.png"
                        alt="Blaziken" class="category-pokemon">
                    <div class="category-info">
                        <h2>üî• Urgente</h2>
                        <span class="category-subtitle">Prioridad m√°xima</span>
                    </div>
                    <button class="pokeball-btn add-task-btn" data-category="urgent" title="Agregar tarea">
                        <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/master-ball.png"
                            alt="Master Ball" class="pokeball-img">
                    </button>
                    <span class="task-count" data-category="urgent">0</span>
                </div>
                <ul class="task-list" id="urgentList"></ul>
            </div>

            <!-- üíº Trabajo -->
            <div class="task-category collapsible" id="workTasks">
                <div class="category-header" data-category="work">
                    <span class="collapse-icon">‚ñº</span>
                    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/248.png"
                        alt="Tyranitar" class="category-pokemon">
                    <div class="category-info">
                        <h2>üíº Trabajo</h2>
                        <span class="category-subtitle">Tareas profesionales</span>
                    </div>
                    <button class="pokeball-btn add-task-btn" data-category="work" title="Agregar tarea">
                        <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/ultra-ball.png"
                            alt="Ultra Ball" class="pokeball-img">
                    </button>
                    <span class="task-count" data-category="work">0</span>
                </div>
                <ul class="task-list" id="workList"></ul>
            </div>

            <!-- üè† Personal -->
            <div class="task-category collapsible" id="personalTasks">
                <div class="category-header" data-category="personal">
                    <span class="collapse-icon">‚ñº</span>
                    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/25.png"
                        alt="Pikachu" class="category-pokemon">
                    <div class="category-info">
                        <h2>üè† Personal</h2>
                        <span class="category-subtitle">Hogar y familia</span>
                    </div>
                    <button class="pokeball-btn add-task-btn" data-category="personal" title="Agregar tarea">
                        <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/great-ball.png"
                            alt="Great Ball" class="pokeball-img">
                    </button>
                    <span class="task-count" data-category="personal">0</span>
                </div>
                <ul class="task-list" id="personalList"></ul>
            </div>

            <!-- üìö Aprendizaje -->
            <div class="task-category collapsible" id="learningTasks">
                <div class="category-header" data-category="learning">
                    <span class="collapse-icon">‚ñº</span>
                    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/196.png"
                        alt="Espeon" class="category-pokemon">
                    <div class="category-info">
                        <h2>üìö Aprendizaje</h2>
                        <span class="category-subtitle">Cursos y skills</span>
                    </div>
                    <button class="pokeball-btn add-task-btn" data-category="learning" title="Agregar tarea">
                        <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png"
                            alt="Pok√© Ball" class="pokeball-img">
                    </button>
                    <span class="task-count" data-category="learning">0</span>
                </div>
                <ul class="task-list" id="learningList"></ul>
            </div>

            <!-- üí° Ideas -->
            <div class="task-category collapsible" id="ideasTasks">
                <div class="category-header" data-category="ideas">
                    <span class="collapse-icon">‚ñº</span>
                    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/151.png"
                        alt="Mew" class="category-pokemon">
                    <div class="category-info">
                        <h2>üí° Ideas</h2>
                        <span class="category-subtitle">Brainstorm y futuro</span>
                    </div>
                    <button class="pokeball-btn add-task-btn" data-category="ideas" title="Agregar tarea">
                        <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/ultra-ball.png"
                            alt="Ultra Ball" class="pokeball-img">
                    </button>
                    <span class="task-count" data-category="ideas">0</span>
                </div>
                <ul class="task-list" id="ideasList"></ul>
            </div>

            <!-- üåü Alg√∫n D√≠a -->
            <div class="task-category collapsible" id="somedayTasks">
                <div class="category-header" data-category="someday">
                    <span class="collapse-icon">‚ñº</span>
                    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/143.png"
                        alt="Snorlax" class="category-pokemon">
                    <div class="category-info">
                        <h2>üåü Alg√∫n D√≠a</h2>
                        <span class="category-subtitle">Sin prisa</span>
                    </div>
                    <button class="pokeball-btn add-task-btn" data-category="someday" title="Agregar tarea">
                        <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png"
                            alt="Pok√© Ball" class="pokeball-img">
                    </button>
                    <span class="task-count" data-category="someday">0</span>
                </div>
                <ul class="task-list" id="somedayList"></ul>
            </div>
        </section>

        <!-- Empty State -->
        <div class="empty-state" id="emptyState">
            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/178.png"
                alt="Xatu" class="empty-pokemon">
            <p>¬°Tu equipo est√° vac√≠o!</p>
            <span>Agrega tu primera tarea para comenzar tu aventura</span>
        </div>
    </div>

    <!-- New Task Modal -->
    <div class="modal-overlay" id="newTaskModal">
        <div class="modal-content new-task-modal">
            <h3 id="newTaskModalTitle">Nueva Tarea</h3>
            <input type="hidden" id="newTaskCategory" value="gym">
            <div class="input-group">
                <label>Nombre de la Misi√≥n</label>
                <input type="text" id="newTaskInput" placeholder="¬øQu√© misi√≥n tienes?" maxlength="100">
            </div>
            <div class="description-group">
                <label>Descripci√≥n</label>
                <textarea id="newTaskDescription" placeholder="Descripci√≥n (opcional)..." rows="2"></textarea>
            </div>
            <div class="subtasks-input-section">
                <label class="subtasks-label">Sub-tareas:</label>
                <div class="subtask-chips" id="newTaskSubtaskChips">
                    <span class="no-subtasks">Sin sub-tareas a√∫n</span>
                </div>
                <div class="add-subtask-row">
                    <input type="text" id="newTaskSubtaskInput" placeholder="Nueva sub-tarea..." maxlength="50">
                    <button id="newTaskAddSubtaskBtn" class="add-subtask-btn">+</button>
                </div>
            </div>
            <div class="modal-actions">
                <button class="cancel-btn" id="cancelNewTask">Cancelar</button>
                <button class="save-btn" id="saveNewTask">Crear Tarea</button>
            </div>
        </div>
    </div>

    <!-- Footer Pokemon Habitat -->
    <footer class="pokemon-habitat" id="pokemonHabitat">
        <div class="habitat-bg"></div>
        <div class="pokemon-team" id="pokemonTeam"></div>
    </footer>

    <!-- Edit Modal -->
    <div class="modal-overlay" id="editModal">
        <div class="modal-content">
            <h3>Editar Tarea</h3>
            <div class="input-group">
                <label>Nombre de la Misi√≥n</label>
                <input type="text" id="editTaskInput" placeholder="Nombre de la tarea">
            </div>
            <div class="description-group">
                <label>Descripci√≥n</label>
                <textarea id="editTaskDescription" placeholder="Descripci√≥n (opcional)" rows="3"></textarea>
            </div>
            <div class="subtasks-input-section">
                <label class="subtasks-label">Sub-tareas:</label>
                <div class="subtask-chips" id="editTaskSubtaskChips">
                    <span class="no-subtasks">Sin sub-tareas a√∫n</span>
                </div>
                <div class="add-subtask-row">
                    <input type="text" id="editTaskSubtaskInput" placeholder="Nueva sub-tarea..." maxlength="50">
                    <button id="editTaskAddSubtaskBtn" class="add-subtask-btn">+</button>
                </div>
            </div>
            <div class="modal-actions">
                <button class="cancel-btn" id="cancelEdit">Cancelar</button>
                <button class="save-btn" id="saveEdit">Guardar</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
        <div class="modal-content">
            <h3>‚öôÔ∏è Configuraci√≥n</h3>
            <div class="input-group">
                <label>Nombre de la App</label>
                <input type="text" id="settingsAppName" placeholder="ToDoMon" maxlength="30">
            </div>
            <div class="settings-info">
                <p>üéÆ El Pok√©mon del header cambia aleatoriamente en cada recarga.</p>
                <p>üí§ Cuando la app est√° dormida, muestra una Pok√©ball.</p>
            </div>
            <div class="modal-actions">
                <button class="cancel-btn" id="closeSettings">Cerrar</button>
                <button class="save-btn" id="saveSettings">Guardar</button>
            </div>
        </div>
    </div>

    <!-- Cache Buster for app.js -->
    <script>document.write('<script src="js/app.js?v=' + new Date().getTime() + '"><\/script>');</script>
    <noscript>
        <script src="js/app.js"></script>
    </noscript>
</body>

</html>